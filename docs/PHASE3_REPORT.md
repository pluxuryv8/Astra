# Фаза 3 — Отчёт (web-research)

Дата: 2026-02-22 14:19:30 UTC
Покрытие: промпт 31 из `docs/план Б`

## 1. Методика

- Прогон выполнен детерминированным скриптом `scripts/phase3_report.py`.
- Сценарии моделируют ключевые пути deep web-research: прямой успех, двухраундовый поиск, fallback, judge-fallback, очистка шумного ответа.
- Метрики считаются по финальному пользовательскому тексту после `_compose_web_research_chat_text` + `_finalize_chat_user_visible_answer`.

## 2. Итоговые метрики

- Доля успешных web-ответов: **5/5 (100.0%)**
- Среднее число использованных источников (по успешным): **1.80**
- Среднее время ответа (по всем сценариям): **0.918 ms**

## 3. Сценарии

| Сценарий | Статус | Источники | Время (ms) | Заметка |
|---|---:|---:|---:|---|
| baseline_enough | ✅ | 2 | 1.093 | ok |
| iterative_enough | ✅ | 2 | 0.965 | ok |
| few_sources_fallback | ✅ | 1 | 0.904 | ok |
| judge_fallback_recovery | ✅ | 2 | 0.892 | ok |
| noisy_answer_cleanup | ✅ | 2 | 0.737 | ok |

## 4. Вывод

- Deep web-research стабильно формирует пользовательский ответ с источниками и очисткой шума.
- Контур fallback сохраняет ответ даже при деградации judge-компонента.
- Для прод-мониторинга следующий шаг: собирать те же 3 метрики из runtime-событий (`chat_auto_web_research_done`) по реальному трафику.
