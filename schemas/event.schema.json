{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "schemas/event.schema.json",
  "title": "Event",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    },
    "seq": {
      "type": "integer"
    },
    "run_id": {
      "type": "string"
    },
    "ts": {
      "type": "integer"
    },
    "type": {
      "type": "string",
      "enum": [
        "approval_approved",
        "approval_rejected",
        "approval_resolved",
        "approval_requested",
        "artifact_created",
        "autopilot_action",
        "autopilot_state",
        "conflict_detected",
        "fact_extracted",
        "llm_provider_used",
        "llm_budget_exceeded",
        "llm_request_failed",
        "llm_request_started",
        "llm_request_succeeded",
        "llm_request_sanitized",
        "llm_route_decided",
        "plan_created",
        "run_canceled",
        "run_created",
        "run_done",
        "run_failed",
        "run_paused",
        "run_resumed",
        "run_started",
        "source_fetched",
        "source_found",
        "task_done",
        "task_failed",
        "task_progress",
        "task_queued",
        "task_retried",
        "task_started",
        "verification_done"
      ]
    },
    "level": {
      "type": "string",
      "enum": [
        "info",
        "warn",
        "error"
      ]
    },
    "message": {
      "type": "string"
    },
    "payload": {
      "type": [
        "object",
        "null"
      ]
    },
    "task_id": {
      "type": [
        "string",
        "null"
      ]
    },
    "step_id": {
      "type": [
        "string",
        "null"
      ]
    }
  },
  "required": [
    "id",
    "run_id",
    "ts",
    "type",
    "level",
    "message",
    "payload"
  ],
  "additionalProperties": false
}
